!* Story

In order to save characters in my tweets
I want to be able to shorten urls

*!
!*> Setup

|Shortening Urls|

*!
!*> vars

!define Url (${ZunzunAppUrl})
!define ShortUrl {http://imdb.com}
!define ShortenUrl {http://tinyurl.com/ya9wfr4}

*!

|Scenario Outline|shortening a url                        |
|When            |making a "status update" containing urls|
|Then            |the urls should be "shorten"            |

|Scenarios          |only the urls are shortened|
|status update      |shorten                    |
|${Url}             |${ShortenUrl}              |
|look at this ${Url}|look at this ${ShortenUrl} |
|(${Url})           |(${ShortenUrl})            |
|[${Url}]           |[${ShortenUrl}]            |
|{${Url}}           |{${ShortenUrl}}            |

|Scenarios    |should not shorten urls already shortened or too short|
|status update|shorten                                               |
|${ShortUrl}  |${ShortUrl}                                           |
|${ShortenUrl}|${ShortenUrl}                                         |

|Scenario Outline|shortening a url                        |
|Given           |the url will be shorten with "service"  |
|When            |making a "status update" containing urls|
|Then            |the urls should be "shorten"            |

|Scenarios|should support multiple url shortening providers|
|service  |status update        |shorten                   |
|is.gd    |${Url}               |http://is.gd/5t6cT        |

------ '''Scenario''' ''autoshorten after space or paste'' ------
|When|entering the status update "${Url}" |
|Then|the status update should be "${Url}"|

|When|entering the status update "${Url} "        |
|Then|the status update should be "${ShortenUrl} "|

|When|pasting "${Url}" into the status update    |
|Then|the status update should be "${ShortenUrl}"|
